import{_ as U,o as u,c as h,a,t as _,n as p,b as L,r,d as S,e as F,w as z,F as T,f as N,l as V,g as j,h as P,i as Y,j as g,k as E}from"./index-ClunKQR1.js";import{a as G}from"./axios-upsvKRUO.js";import{u as H}from"./wishlist-DqNoPAPU.js";import{g as O,a as J,b as Q,f as Z}from"./URL-BbuJMKW_.js";const $={name:"BannerComponent",props:{movie:{type:Object,required:!0}},computed:{backdropUrl(){return console.log(this.movie),this.movie?`https://image.tmdb.org/t/p/original${this.movie.backdrop_path}`:""}}},ee={class:"banner-content"};function te(s,t,i,e,l,c){return i.movie?(u(),h("div",{key:0,class:"banner",style:p({backgroundImage:`url(${c.backdropUrl})`})},[a("div",ee,[a("h1",null,_(i.movie.title),1),a("p",null,_(i.movie.overview),1),t[0]||(t[0]=a("button",{class:"play-btn title-btn"},"재생",-1)),t[1]||(t[1]=a("button",{class:"info-btn title-btn"},"상세 정보",-1))])],4)):L("",!0)}const oe=U($,[["render",te],["__scopeId","data-v-4241ddb4"]]),ne={name:"MovieRow",props:{title:{type:String,required:!0},fetchUrl:{type:String,required:!0}},setup(s){const t=r([]),i=r(null),e=r(null),l=r(0),c=r(!1),o=r(!1),d=r(0),M=r(0),{wishlist:fe,toggleWishlist:k,isInWishlist:W}=H(),y=()=>i.value&&e.value?Math.max(0,i.value.scrollWidth-e.value.clientWidth):0,v=r(y()),R=S(()=>l.value<=0),x=S(()=>l.value>=v.value),B=async()=>{try{const n=await G.get(s.fetchUrl);t.value=n.data.results,console.log(t)}catch(n){console.error("Error fetching movies:",n)}},C=n=>`https://image.tmdb.org/t/p/w300${n}`,b=(n,m=null)=>{const f=m||e.value.clientWidth*.8;n==="left"?l.value=Math.max(0,l.value-f):l.value=Math.min(v.value,l.value+f)},I=()=>{c.value=!0},D=()=>{c.value=!1},K=n=>{if(n.preventDefault(),o.value)return;o.value=!0;const m=n.deltaY>0?"right":"left";b(m),setTimeout(()=>{o.value=!1},500)},X=n=>{d.value=n.touches[0].clientX,M.value=n.touches[0].clientX},A=n=>{M.value=n.touches[0].clientX},q=()=>{const n=d.value-M.value;if(Math.abs(n)>50){const f=n>0?"right":"left";b(f,Math.abs(n))}},w=()=>{v.value=y(),l.value=Math.min(l.value,v.value)};return F(()=>{B(),window.addEventListener("resize",w),w()}),z(t,()=>{setTimeout(w,0)}),{movies:t,slider:i,sliderWindow:e,scrollAmount:l,maxScroll:v,atLeftEdge:R,atRightEdge:x,showButtons:c,getImageUrl:C,slide:b,handleMouseMove:I,handleMouseLeave:D,handleWheel:K,handleTouchStart:X,handleTouchMove:A,handleTouchEnd:q,toggleWishlist:k,isInWishlist:W}}},le={class:"movie-row"},se=["disabled"],ae={class:"slider-window",ref:"sliderWindow"},ie=["onClick"],re=["src","alt"],ce={key:0,class:"wishlist-indicator"},de=["disabled"];function ue(s,t,i,e,l,c){return u(),h("div",le,[a("h2",null,_(i.title),1),a("div",{class:"slider-container",onWheel:t[2]||(t[2]=(...o)=>e.handleWheel&&e.handleWheel(...o)),onTouchstart:t[3]||(t[3]=(...o)=>e.handleTouchStart&&e.handleTouchStart(...o)),onTouchmove:t[4]||(t[4]=(...o)=>e.handleTouchMove&&e.handleTouchMove(...o)),onTouchend:t[5]||(t[5]=(...o)=>e.handleTouchEnd&&e.handleTouchEnd(...o)),onMousemove:t[6]||(t[6]=(...o)=>e.handleMouseMove&&e.handleMouseMove(...o)),onMouseleave:t[7]||(t[7]=(...o)=>e.handleMouseLeave&&e.handleMouseLeave(...o))},[a("button",{class:"slider-button left",onClick:t[0]||(t[0]=o=>e.slide("left")),style:p({opacity:e.showButtons&&!e.atLeftEdge?1:0}),disabled:e.atLeftEdge},"<",12,se),a("div",ae,[a("div",{class:"movie-slider",ref:"slider",style:p({transform:`translateX(${-e.scrollAmount}px)`})},[(u(!0),h(T,null,N(e.movies,o=>(u(),h("div",{key:o.id,class:"movie-card",onClick:d=>e.toggleWishlist(o)},[a("img",{src:e.getImageUrl(o.poster_path),alt:o.title},null,8,re),e.isInWishlist(o.id)?(u(),h("div",ce,"👍")):L("",!0)],8,ie))),128))],4)],512),a("button",{class:"slider-button right",onClick:t[1]||(t[1]=o=>e.slide("right")),style:p({opacity:e.showButtons&&!e.atRightEdge?1:0}),disabled:e.atRightEdge},">",12,de)],32)])}const he=U(ne,[["render",ue],["__scopeId","data-v-321b45fe"]]);V.add(j,P);const ve={name:"Home",components:{BannerComponent:oe,MovieRow:he,FontAwesomeIcon:Y},data(){return{apiKey:"5a2a3dec198ef93f98d7ee1257818fb8",featuredMovie:null,popularMoviesUrl:"",newReleasesUrl:"",actionMoviesUrl:""}},created(){if(!this.apiKey){console.error("TMDB API 키가 설정되지 않았습니다. .env 파일을 확인하세요.");return}this.popularMoviesUrl=O(this.apiKey),this.newReleasesUrl=J(this.apiKey),this.actionMoviesUrl=Q(this.apiKey,"28"),Z(this.apiKey).then(s=>{this.featuredMovie=s||null}).catch(s=>{console.error("대표 영화를 가져오는 중 오류 발생:",s),this.featuredMovie=null})},methods:{handleScroll(){const s=document.querySelector(".app-header");s&&(window.scrollY>50?s.classList.add("scrolled"):s.classList.remove("scrolled"))}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)}};function me(s,t,i,e,l,c){const o=E("BannerComponent"),d=E("movie-row");return u(),h(T,null,[g(o,{movie:l.featuredMovie},null,8,["movie"]),g(d,{title:"인기 영화",fetchUrl:l.popularMoviesUrl},null,8,["fetchUrl"]),g(d,{title:"최신 영화",fetchUrl:l.newReleasesUrl},null,8,["fetchUrl"]),g(d,{title:"액션 영화",fetchUrl:l.actionMoviesUrl},null,8,["fetchUrl"])],64)}const we=U(ve,[["render",me],["__scopeId","data-v-68e04b02"]]);export{we as default};
