import{u as V}from"./wishlist-DqNoPAPU.js";import{_ as E,r as c,d as _,e as N,m as S,o as n,c as r,a as i,F as k,f as C,p as M,t as p,z as U,b as x,q as F,y as j}from"./index-ClunKQR1.js";const q={name:"MovieWishlist",setup(){const a=c(null),t=c(4),d=c(20),e=c(1),v=c(window.innerWidth<=768),{wishlist:f,loadWishlist:s,toggleWishlist:g}=V(),o=_(()=>f.value),w=l=>l?`https://image.tmdb.org/t/p/w300${l}`:"/placeholder-image.jpg",P=()=>{if(a.value){const l=a.value.offsetWidth,h=v.value?90:220;t.value=Math.floor(l/h)}},z=_(()=>{const l=(e.value-1)*d.value,h=l+d.value;return o.value.slice(l,h).reduce((u,B,L)=>{const m=Math.floor(L/t.value);return u[m]||(u[m]=[]),u[m].push(B),u},[])}),b=_(()=>Math.ceil(o.value.length/d.value)),I=()=>e.value<b.value&&e.value++,y=()=>e.value>1&&e.value--,W=()=>{v.value=window.innerWidth<=768,P()};return N(()=>{s(),P(),window.addEventListener("resize",W)}),S(()=>window.removeEventListener("resize",W)),{visibleWishlistMovies:z,wishlistMovies:o,currentPage:e,totalPages:b,getImageUrl:w,nextPage:I,prevPage:y,gridContainer:a,rowSize:t,toggleWishlist:g}}},D={class:"movie-grid",ref:"gridContainer"},R=["onClick"],T=["src","alt"],H={class:"movie-title"},J={key:0,class:"empty-wishlist"},K={key:1,class:"pagination"},O=["disabled"],Q=["disabled"];function X(a,t,d,e,v,f){return n(),r("div",D,[i("div",{class:M(["grid-container",a.currentView])},[(n(!0),r(k,null,C(e.visibleWishlistMovies,(s,g)=>(n(),r("div",{key:g,class:M(["movie-row",{full:s.length===e.rowSize}])},[(n(!0),r(k,null,C(s,o=>(n(),r("div",{key:o.id,class:"movie-card",onClick:w=>e.toggleWishlist(o)},[i("img",{src:e.getImageUrl(o.poster_path),alt:o.title},null,8,T),i("div",H,p(o.title),1),t[3]||(t[3]=i("div",{class:"wishlist-indicator"},"👍",-1))],8,R))),128))],2))),128))],2),e.wishlistMovies.length===0?(n(),r("div",J,[t[4]||(t[4]=U(" 위시리스트가 비어 있습니다. ")),i("button",{onClick:t[0]||(t[0]=s=>a.$router.push("/popular")),class:"go-to-popular"}," 영화 추가하러 가기 ")])):x("",!0),e.totalPages>1?(n(),r("div",K,[i("button",{onClick:t[1]||(t[1]=(...s)=>e.prevPage&&e.prevPage(...s)),disabled:e.currentPage===1},"< 이전",8,O),i("span",null,p(e.currentPage)+" / "+p(e.totalPages),1),i("button",{onClick:t[2]||(t[2]=(...s)=>e.nextPage&&e.nextPage(...s)),disabled:e.currentPage===e.totalPages},"다음 >",8,Q)])):x("",!0)],512)}const Y=E(q,[["render",X],["__scopeId","data-v-b80a00c1"]]),A=F({__name:"home-wishlist",setup(a){return(t,d)=>(n(),j(Y))}});export{A as default};
